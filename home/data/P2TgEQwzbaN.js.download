if (self.CavalryLogger) { CavalryLogger.start_js(["+iFWH"]); }

__d("PluginSentryState",[],(function a(b,c,d,e,f,g){f.exports={VALID:0,CONFIRMATION_REQUIRED:1,ERROR:2};}),null);
__d('PagesMessageSender',['MercuryMessageActions','MercuryMessageObject','MercurySourceType'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l){this.__senderID=i;this.__threadID=j;this.__messageActions=c('MercuryMessageActions').getForFBID(i);this.__messageObject=c('MercuryMessageObject').getForFBID(i);this.__creatorInfo=l?l:null;this.__pageID=k;}h.prototype.__willSendMessage=function(i){};h.prototype.getTargetThreadID=function(){return this.__threadID;};h.prototype.sendMessage=function(i){this.__willSendMessage(i);var j=this.__messageObject.constructUserGeneratedMessageObject(i,c('MercurySourceType').TITAN_WEB,this.__threadID,null,this.__creatorInfo);this.__messageActions.send(j);};f.exports=h;}),null);
__d('PagePluginMessageSender',['PagePluginEvents','PagePluginLogger','PluginPageTabKey','PagesMessageSender'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('PagesMessageSender'));i=h&&h.prototype;function j(k,l,m,n){i.constructor.call(this,k,l,m,null);this.$PagePluginMessageSender1=new (c('PagePluginLogger'))(m,n);}j.prototype.__willSendMessage=function(k){this.$PagePluginMessageSender1.notify(c('PagePluginEvents').page_plugin.messages.send,c('PluginPageTabKey').MESSAGES,{message:k});};f.exports=j;}),null);
__d("XPluginPageMessagesTabSentryConfirmActionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/plugins\/confirm\/page\/messages\/action\/",{});}),null);
__d("XPluginPageMessagesTabSentryController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/plugins\/page\/messages\/confirm\/",{});}),null);
__d("XPluginPageMessagesTabSentryPopupPluginController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/plugins\/confirm\/page\/messages\/send\/",{page_id:{type:"String",required:true},message:{type:"String",required:true},thread_id:{type:"String",required:true},iframe_referer:{type:"String",defaultValue:""}});}),null);
__d('PagePluginMessagesTab.react',['cx','fbt','ix','AbstractTextArea.react','AsyncRequest','Image.react','Keys','Layout.react','Link.react','PagePluginEvents','PagePluginLogger','PagePluginMessageSender','PluginPageTabKey','PluginSentryState','PopupWindow','React','ReactDOM','Vector','XPluginPageMessagesTabSentryConfirmActionController','XPluginPageMessagesTabSentryController','XPluginPageMessagesTabSentryPopupPluginController','XUIButton.react','XUISpinner.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('Layout.react').Column,n=c('Layout.react').FillColumn;k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;function o(p,q){l.constructor.call(this,p,q);this.$PagePluginMessagesTab1=new (c('PagePluginLogger'))(this.props.pageID,this.props.refererURI);this.$PagePluginMessagesTab2=new (c('PagePluginMessageSender'))(this.props.userID,this.props.threadID,this.props.pageID,this.props.refererURI);this.state={shouldShowMessageSentView:false,isSentryPending:false,isWaitingForUserConfirmation:false,isSentryError:false,message:'',bottomPartHeight:0};}o.prototype.componentDidMount=function(){this.$PagePluginMessagesTab1.notify(c('PagePluginEvents').page_plugin.tab.render,c('PluginPageTabKey').MESSAGES);this.setState({bottomPartHeight:this.$PagePluginMessagesTab3()});};o.prototype.$PagePluginMessagesTab3=function(){var p=this.refs.bottomRoot;if(!p)return 0;var q=c('ReactDOM').findDOMNode(p);if(!q)return 0;return c('Vector').getElementDimensions(q).y;};o.prototype.$PagePluginMessagesTab4=function(){var p=this.state.message;window.notifySentryConfirm=function(){this.$PagePluginMessagesTab5(p);window.notifySentryConfirm=undefined;}.bind(this);var q=c('XPluginPageMessagesTabSentryPopupPluginController').getURIBuilder().setString('page_id',this.props.pageID).setString('message',this.state.message).setString('thread_id',this.props.threadID).setString('iframe_referer',this.props.refererURI).getURI();c('PopupWindow').open(q,270,450);};o.prototype.$PagePluginMessagesTab6=function(){this.setState({isSentryPending:true});var p=c('XPluginPageMessagesTabSentryController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(p).setMethod('POST').setData({page_id:this.props.pageID,message:this.state.message,iframe_referer:this.props.refererURI}).setHandler(function(q){var r=q.payload;if(r.result===c('PluginSentryState').CONFIRMATION_REQUIRED){this.$PagePluginMessagesTab7();}else if(r.result===c('PluginSentryState').VALID){this.$PagePluginMessagesTab8();}else this.$PagePluginMessagesTab9();}.bind(this)).setErrorHandler(function(){this.$PagePluginMessagesTab9();}.bind(this)).send();};o.prototype.$PagePluginMessagesTab8=function(){this.setState({isSentryPending:false});this.$PagePluginMessagesTab10();};o.prototype.$PagePluginMessagesTab10=function(){this.$PagePluginMessagesTab2.sendMessage(this.state.message);this.setState({message:'',shouldShowMessageSentView:true});};o.prototype.$PagePluginMessagesTab7=function(){this.setState({isWaitingForUserConfirmation:true,isSentryPending:false});};o.prototype.$PagePluginMessagesTab9=function(){this.setState({isSentryPending:false,isSentryError:true});};o.prototype.$PagePluginMessagesTab5=function(p){this.setState({isWaitingForUserConfirmation:false,isSentryPending:false,message:'',shouldShowMessageSentView:true});var q=c('XPluginPageMessagesTabSentryConfirmActionController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(q).setMethod('POST').setData({page_id:this.props.pageID,message:p,iframe_referer:this.props.refererURI}).send();};o.prototype.$PagePluginMessagesTab11=function(){var p=i._("Nh\u1eadp tin nh\u1eafn cho {page_name}...",[i.param('page_name',this.props.pageName)]);return c('React').createElement('div',{className:"_2p5m",style:{bottom:this.state.bottomPartHeight+'px'}},c('React').createElement(c('AbstractTextArea.react'),{disabled:this.state.isSentryPending||this.state.isWaitingForUserConfirmation||this.state.isSentryError,onChange:function(event){return this.setState({message:event.target.value});}.bind(this),placeholder:p,value:this.state.message}));};o.prototype.$PagePluginMessagesTab12=function(){return c('React').createElement(c('XUIButton.react'),{className:"_2p5n",size:'large',label:i._("G\u1eedi tin nh\u1eafn kh\u00e1c"),onClick:function(){return this.setState({shouldShowMessageSentView:false});}.bind(this)});};o.prototype.$PagePluginMessagesTab13=function(){return c('React').createElement(c('Image.react'),{className:"_387u",src:j("30160"),width:24});};o.prototype.$PagePluginMessagesTab14=function(){return c('React').createElement('div',{className:"_1lhb"},this.$PagePluginMessagesTab13(),c('React').createElement('div',{className:"_2wni"},i._("L\u1ed7i")));};o.prototype.$PagePluginMessagesTab15=function(){return c('React').createElement('div',{className:"_1lhb _2wnh",onClick:function(){return this.$PagePluginMessagesTab4();}.bind(this),role:'button',tabIndex:'0'},this.$PagePluginMessagesTab13(),c('React').createElement('div',{className:"_2wni"},i._("X\u00e1c nh\u1eadn")));};o.prototype.$PagePluginMessagesTab16=function(){return c('React').createElement(c('XUIButton.react'),{className:"_2p5n",size:'large',use:'confirm',label:i._("G\u1eedi"),onClick:function(){return this.$PagePluginMessagesTab6();}.bind(this),disabled:this.state.isSentryPending||this.state.message.trim()==='',image:this.state.isSentryPending?c('React').createElement(c('XUISpinner.react'),null):null});};o.prototype.$PagePluginMessagesTab17=function(){var p=null;if(this.state.shouldShowMessageSentView){p=this.$PagePluginMessagesTab12();}else if(this.state.isSentryError){p=this.$PagePluginMessagesTab14();}else if(this.state.isWaitingForUserConfirmation){p=this.$PagePluginMessagesTab15();}else p=this.$PagePluginMessagesTab16();return c('React').createElement(c('Layout.react'),{className:"_2p5v"},c('React').createElement(n,{className:"_5rto"},this.props.responsiveness),c('React').createElement(m,null,p));};o.prototype.$PagePluginMessagesTab18=function(){return c('React').createElement(c('Layout.react'),{className:"_2p5w"},c('React').createElement(m,null,c('React').createElement(c('Image.react'),{className:"_2p5x",src:j("95074"),width:'28'})),c('React').createElement(n,null,c('React').createElement('div',{className:"_2p5y"},i._("Tin nh\u1eafn \u0111\u00e3 g\u1eedi cho {page-name} v\u00e0 c\u00e2u tr\u1ea3 l\u1eddi c\u1ee7a h\u1ecd s\u1ebd hi\u1ec3n th\u1ecb trong Messenger",[i.param('page-name',c('React').createElement('span',null,this.props.pageName))]))));};o.prototype.$PagePluginMessagesTab19=function(){var p=c('React').createElement('div',{className:"_2p5z"},c('React').createElement(c('Image.react'),{className:"_2p5-",src:j("28210"),width:32}),c('React').createElement('div',{className:"_2p5_"},i._("\u0110\u00e3 g\u1eedi tin nh\u1eafn")),c('React').createElement('div',{className:"_2p60"},i._("\u0110\u00e3 g\u1eedi tin nh\u1eafn. H\u00e3y \u0111\u0103ng nh\u1eadp Messenger tr\u00ean thi\u1ebft b\u1ecb di \u0111\u1ed9ng ho\u1eb7c truy c\u1eadp {messenger_url} \u0111\u1ec3 xem cu\u1ed9c tr\u00f2 chuy\u1ec7n.",[i.param('messenger_url',c('React').createElement(c('Link.react'),{href:'https://messenger.com',target:'_blank'},'messenger.com'))])));return c('React').createElement('div',{className:"_1_c3"},c('React').createElement('div',{className:"_2p61"},c('React').createElement('div',{className:"_2p62"},p)),c('React').createElement('div',{className:"_2p63"},this.$PagePluginMessagesTab17()));};o.prototype.$PagePluginMessagesTab20=function(){return c('React').createElement('div',{className:"_1_c3"},this.$PagePluginMessagesTab11(),c('React').createElement('div',{className:"_2p63",ref:'bottomRoot'},this.$PagePluginMessagesTab18(),this.$PagePluginMessagesTab17()));};o.prototype.render=function(){if(this.state.shouldShowMessageSentView){return this.$PagePluginMessagesTab19();}else return this.$PagePluginMessagesTab20();};f.exports=o;}),null);